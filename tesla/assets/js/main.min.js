class Modal{constructor(e){this.config=Object.assign({backscroll:!0,linkAttrName:"data-modal",closeOnOverlay:!0,closeOnEsc:!0,closeBtnAttrName:"data-modal-close",catchFocus:!0,fixedSelectors:"*[data-fixed]",beforeOpen:()=>{},afterClose:()=>{}},e),this.config.linkAttrName&&this.init(),this._closeAfterTransition=this._closeAfterTransition.bind(this)}init(){this.isOpened=!1,this.openedWindow=!1,this.starter=!1,this._nextWindows=!1,this._scrollPosition=0,this._reopenTrigger=!1,this._overlayChecker=!1,this._isMoved=!1,this._form=null,this._focusElements=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],this.eventsFeeler()}eventsFeeler(){document.addEventListener("click",(e=>{const t=e.target.closest(`[${this.config.linkAttrName}]`);if(!this._isMoved&&t){e.preventDefault(),this.starter=t;const s=this.starter.getAttribute(this.config.linkAttrName);return this._nextWindows=document.querySelector("#"+s),void this.open()}e.target.closest(`[${this.config.closeBtnAttrName}]`)&&this.close()})),this.config.closeOnOverlay&&(document.addEventListener("mousedown",(e=>{!this._isMoved&&e.target instanceof Element&&!e.target.classList.contains("modal__wrapper")||(this._overlayChecker=!0)})),document.addEventListener("mouseup",(e=>{if(!this._isMoved&&e.target instanceof Element&&this._overlayChecker&&e.target.classList.contains("modal__wrapper"))return e.preventDefault(),this._overlayChecker=!this._overlayChecker,void this.close();this._overlayChecker=!1}))),window.addEventListener("keydown",(e=>{if(!this._isMoved&&this.config.closeOnEsc&&27===e.which&&this.isOpened)return e.preventDefault(),void this.close();!this._isMoved&&this.config.catchFocus&&9===e.which&&this.isOpened&&this.focusCatcher(e)}))}open(e){if(e&&(this._nextWindows="string"==typeof e?document.querySelector(e):e),this._nextWindows){if(this.isOpened)return this._reopenTrigger=!0,void this.close();this.openedWindow=this._nextWindows,this._form=this.openedWindow.querySelector("form"),this.config.beforeOpen(this),this._bodyScrollControl(),this.openedWindow.classList.add("modal--active"),this.openedWindow.setAttribute("aria-hidden","false"),this.config.catchFocus&&this.focusControl(),this.isOpened=!0}else console.log("Warning: Modal selector is not found")}close(){if(!this.isOpened)return;this._form.querySelectorAll("input[data-form-data]").forEach((e=>{this._form.removeChild(e)})),this.openedWindow.classList.add("modal--moved"),this._isMoved=!0,this.openedWindow.addEventListener("transitionend",this._closeAfterTransition),this.openedWindow.classList.remove("modal--active")}_closeAfterTransition(){this.openedWindow.classList.remove("modal--moved"),this.openedWindow.removeEventListener("transitionend",this._closeAfterTransition),this._isMoved=!1,this.openedWindow.setAttribute("aria-hidden","true"),this.config.catchFocus&&this.focusControl(),this._bodyScrollControl(),this.isOpened=!1,this.openedWindow.scrollTop=0,this.config.afterClose(this),this._reopenTrigger&&(this._reopenTrigger=!1,this.open())}focusControl(){const e=this.openedWindow.querySelectorAll(this._focusElements);this.isOpened&&this.starter?this.starter.focus():e.length&&e[0].focus()}focusCatcher(e){const t=this.openedWindow.querySelectorAll(this._focusElements),s=Array.prototype.slice.call(t);if(this.openedWindow.contains(document.activeElement)){const t=s.indexOf(document.activeElement);e.shiftKey&&0===t&&(s[s.length-1].focus(),e.preventDefault()),e.shiftKey||t!==s.length-1||(s[0].focus(),e.preventDefault())}else s[0].focus(),e.preventDefault()}_bodyScrollControl(){if(!this.config.backscroll)return;const e=document.querySelectorAll(this.config.fixedSelectors),t=Array.prototype.slice.call(e),s=document.documentElement;if(!0===this.isOpened)return s.classList.remove("modal-opened"),s.style.marginRight="",t.forEach((e=>{e.style.paddingRight=""})),window.scrollTo(0,this._scrollPosition),void(s.style.top="");this._scrollPosition=window.pageYOffset;const i=window.innerWidth-s.clientWidth;s.style.top=-this._scrollPosition+"px",i&&(s.style.marginRight=`${i}px`,t.forEach((e=>{e.style.paddingRight=`${parseInt(getComputedStyle(e).paddingRight,10)+i}px`}))),s.classList.add("modal-opened")}}class Accordion{constructor(e,t){this._el="string"==typeof e?document.querySelector(e):e;this._config=Object.assign({alwaysOpen:!0,duration:350,itemClass:"accordion__item",headerClass:"accordion__header",bodyClass:"accordion__body"},t),this.addEventListener()}addEventListener(){this._el&&this._el.addEventListener("click",(e=>{const t=e.target.closest("."+this._config.headerClass);if(t){if(!this._config.alwaysOpen){const e=this._el.querySelector(".show");e&&e!==t.parentElement&&this.toggle(e)}this.toggle(t.parentElement)}}))}show(e){const t=e.querySelector("."+this._config.bodyClass);if(t.classList.contains("collapsing")||e.classList.contains("show"))return;t.style.display="block";const s=t.offsetHeight;t.style.height=0,t.style.overflow="hidden",t.style.transition=`height ${this._config.duration}ms ease`,t.classList.add("collapsing"),e.classList.add("slidedown"),t.offsetHeight,t.style.height=`${s}px`,window.setTimeout((()=>{t.classList.remove("collapsing"),e.classList.remove("slidedown"),t.classList.add("collapse"),e.classList.add("show"),t.style.display="",t.style.height="",t.style.transition="",t.style.overflow=""}),this._config.duration)}hide(e){const t=e.querySelector("."+this._config.bodyClass);!t.classList.contains("collapsing")&&e.classList.contains("show")&&(t.style.height=`${t.offsetHeight}px`,t.offsetHeight,t.style.display="block",t.style.height=0,t.style.overflow="hidden",t.style.transition=`height ${this._config.duration}ms ease`,t.classList.remove("collapse"),e.classList.remove("show"),t.classList.add("collapsing"),window.setTimeout((()=>{t.classList.remove("collapsing"),t.classList.add("collapse"),t.style.display="",t.style.height="",t.style.transition="",t.style.overflow=""}),this._config.duration))}toggle(e){e.classList.contains("show")?this.hide(e):this.show(e)}}class Queue{#e=[];enqueue=e=>this.#e.splice(0,0,e);dequeue=()=>this.#e.pop();isempty=()=>0===this.#e.length;empty=()=>this.#e.length=0;size=()=>this.#e.length}$(document).ready((function(){let e=$(window),t=new Queue,s=$(".animated_item"),i=e.scrollTop(),o=e.height(),n=100;function a(){let a=e.scrollTop(),l=!0;a<i&&(l=!1),s.each((function(){if(!$(this).hasClass("_animated"))if($(this).hasClass("animate__animated")){if(a+o+500>=$(this).offset().top&&$(this).offset().top+$(this).height()>=a-500)return;$(this).removeClass("animate__animated "+$(this).data("animation"))}else{if(a+o+n<$(this).offset().top||$(this).offset().top+$(this).height()<a-n)return;l||"animate__fadeInUp"!==$(this).data("animation")?($(this).addClass("animate__animated _animated"),t.enqueue([$(this),$(this).data("animation")])):($(this).addClass("animate__animated _animated"),t.enqueue([$(this),"animate__fadeInDown"])),$(this).on("animationend",(function(){$(this).removeClass("_animated")}))}})),i=a}e.on("resize",(function(){o=e.height()})),e.on("scroll",a),a(),setInterval((()=>{if(t.size()>0){let e=t.dequeue();$(e[0]).addClass(e[1])}}),50);let l=function(){let e=$(".header");$(window).scrollTop()>100?e.addClass("header--fixed"):$("html").hasClass("modal-opened")||e.removeClass("header--fixed")};l(),$(window).on("scroll",l);const r=document.documentElement;let d=0,c=!1;function h(){c&&($(".header__menu").removeClass("header__menu--showed"),r.classList.remove("modal-opened"),r.style.marginRight="",window.scrollTo(0,d),r.style.top="",c=!1)}$(".header__open-menu-btn").on("click",(function(){$(".header__menu").addClass("header__menu--showed"),d=window.pageYOffset;const e=window.innerWidth-r.clientWidth;r.style.top=-d+"px",e&&(r.style.marginRight=`${e}px`),r.classList.add("modal-opened"),c=!0})),$(".header__close-menu-btn").on("click",h),$(window).on("resize",h),$(document).on("keyup",h),$(document).mouseup((function(e){var t=$(".header__menu");t.is(e.target)||0!==t.has(e.target).length||h()})),$(document).on("click",'a[href^="#"]',(function(e){$(this).attr("href").length<=1||(e.preventDefault(),h(),$("html, body").animate({scrollTop:$($.attr(this,"href")).offset().top},500))})),$(".principles__slider-wrap").slick({infinite:!0,speed:300,variableWidth:!0,autoplay:!0,autoplaySpeed:3e3,prevArrow:$(".principles").find(".slick__arrow--prev"),nextArrow:$(".principles").find(".slick__arrow--next")}),$(".slider-progress").each((function(e,t){let s=$(t).data("slider"),i=$("#"+s),o=$(t).find(".slider-progress__input");o.attr("max",i[0].slick.slideCount-1),i.on("afterChange",(function(e,t,s){o.val(s)})),$(o).mousedown((function(){i.slick("slickPause")})),$(o).mouseup((function(){i.slick("slickPlay")})),$(o).on("input",(function(){i.slick("slickGoTo",$(this).val())}))})),$(".life__images").each((function(e,t){$(this).slick({infinite:!0,speed:300,slidesToShow:1,autoplay:!0,autoplaySpeed:3e3,dots:!0,appendDots:$(this).parent().find(".slick__dots"),customPaging:function(e,t){return""},prevArrow:$(this).parent().find(".slick__arrow--prev"),nextArrow:$(this).parent().find(".slick__arrow--next")})})),$(".partners__slider-wrap").slick({centerMode:!0,infinite:!0,speed:300,slidesToShow:5,slidesToScroll:5,variableWidth:!1,autoplay:!0,autoplaySpeed:3e3,prevArrow:$(".partners").find(".slick__arrow--prev"),nextArrow:$(".partners").find(".slick__arrow--next"),responsive:[{breakpoint:992,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:768,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:576,settings:{slidesToShow:1,slidesToScroll:1}}]}),new Accordion(".advantages__list",{alwaysOpen:!1,duration:350,itemClass:"advantage",headerClass:"advantage__head",bodyClass:"advantage__body"});let f=new Modal,p=document.querySelector(".wpcf7");p&&p.addEventListener("wpcf7mailsent",(function(e){f.close()}),!1),$("input[name='your-phone']").mask("+7 (999) 999-99-99",{placeholder:"+7 (___) ___-__-__"});let u=document.querySelectorAll(".field__file");Array.prototype.forEach.call(u,(function(e){let t=e.nextElementSibling,s=t.querySelector(".field__file-fake").innerText;e.addEventListener("change",(function(e){let i="";this.files&&this.files.length>=1&&(i=this.files.length),t.querySelector(".field__file-fake").innerText=i?"Выбрано файлов: "+i:s}))})),$('input[type="file"]').on("change",(function(e){let t=$(this).parent().find(".form__input--file span");t.text();this.files&&this.files.length>0&&(t.text(this.files[0].name),$(this).parent().find(".form__input--file").removeClass("form__input--placeholder"))}))}));