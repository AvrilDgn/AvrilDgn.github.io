"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}var Modal=function(){function e(t){_classCallCheck(this,e);this.config=Object.assign({backscroll:!0,linkAttrName:"data-modal",closeOnOverlay:!0,closeOnEsc:!0,closeBtnAttrName:"data-modal-close",catchFocus:!0,fixedSelectors:"*[data-fixed]",beforeOpen:function(){},afterClose:function(){}},t),this.config.linkAttrName&&this.init(),this._closeAfterTransition=this._closeAfterTransition.bind(this)}return _createClass(e,[{key:"init",value:function(){this.isOpened=!1,this.openedWindow=!1,this.starter=!1,this._nextWindows=!1,this._scrollPosition=0,this._reopenTrigger=!1,this._overlayChecker=!1,this._isMoved=!1,this._form=null,this._focusElements=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],this.eventsFeeler()}},{key:"eventsFeeler",value:function(){var e=this;document.addEventListener("click",(function(t){var o=t.target.closest("[".concat(e.config.linkAttrName,"]"));if(!e._isMoved&&o){t.preventDefault(),e.starter=o;var n=e.starter.getAttribute(e.config.linkAttrName);return e._nextWindows=document.querySelector("#"+n),void e.open()}t.target.closest("[".concat(e.config.closeBtnAttrName,"]"))&&e.close()})),this.config.closeOnOverlay&&(document.addEventListener("mousedown",(function(t){!e._isMoved&&t.target instanceof Element&&!t.target.classList.contains("modal__wrapper")||(e._overlayChecker=!0)})),document.addEventListener("mouseup",(function(t){if(!e._isMoved&&t.target instanceof Element&&e._overlayChecker&&t.target.classList.contains("modal__wrapper"))return t.preventDefault(),e._overlayChecker=!e._overlayChecker,void e.close();e._overlayChecker=!1}))),window.addEventListener("keydown",(function(t){if(!e._isMoved&&e.config.closeOnEsc&&27===t.which&&e.isOpened)return t.preventDefault(),void e.close();!e._isMoved&&e.config.catchFocus&&9===t.which&&e.isOpened&&e.focusCatcher(t)}))}},{key:"open",value:function(e){if(e&&(this._nextWindows="string"==typeof e?document.querySelector(e):e),this._nextWindows){if(this.isOpened)return this._reopenTrigger=!0,void this.close();this.openedWindow=this._nextWindows,this._form=this.openedWindow.querySelector("form"),this.config.beforeOpen(this),this._bodyScrollControl(),this.openedWindow.classList.add("modal--active"),this.openedWindow.setAttribute("aria-hidden","false"),this.config.catchFocus&&this.focusControl(),this.isOpened=!0}else console.log("Warning: Modal selector is not found")}},{key:"close",value:function(){var e=this;if(this.isOpened){if(this._form)this._form.querySelectorAll("input[data-form-data]").forEach((function(t){e._form.removeChild(t)}));this.openedWindow.classList.add("modal--moved"),this._isMoved=!0,this.openedWindow.addEventListener("transitionend",this._closeAfterTransition),this.openedWindow.classList.remove("modal--active")}}},{key:"_closeAfterTransition",value:function(){this.openedWindow.classList.remove("modal--moved"),this.openedWindow.removeEventListener("transitionend",this._closeAfterTransition),this._isMoved=!1,this.openedWindow.setAttribute("aria-hidden","true"),this.config.catchFocus&&this.focusControl(),this._bodyScrollControl(),this.isOpened=!1,this.openedWindow.scrollTop=0,this.config.afterClose(this),this._reopenTrigger&&(this._reopenTrigger=!1,this.open())}},{key:"focusControl",value:function(){var e=this.openedWindow.querySelectorAll(this._focusElements);this.isOpened&&this.starter?this.starter.focus():e.length&&e[0].focus()}},{key:"focusCatcher",value:function(e){var t=this.openedWindow.querySelectorAll(this._focusElements),o=Array.prototype.slice.call(t);if(this.openedWindow.contains(document.activeElement)){var n=o.indexOf(document.activeElement);e.shiftKey&&0===n&&(o[o.length-1].focus(),e.preventDefault()),e.shiftKey||n!==o.length-1||(o[0].focus(),e.preventDefault())}else o[0].focus(),e.preventDefault()}},{key:"_bodyScrollControl",value:function(){if(this.config.backscroll){var e=document.querySelectorAll(this.config.fixedSelectors),t=Array.prototype.slice.call(e),o=document.querySelector(".main");if(!0===this.isOpened)return o.classList.remove("modal-opened"),o.style.paddingRight="",t.forEach((function(e){e.style.paddingRight=""})),window.scrollTo(0,this._scrollPosition),void(o.style.top="");this._scrollPosition=window.pageYOffset;var n=window.innerWidth-o.clientWidth;o.style.top="".concat(-this._scrollPosition,"px"),n&&(o.style.paddingRight="".concat(n,"px"),t.forEach((function(e){e.style.paddingRight="".concat(parseInt(getComputedStyle(e).paddingRight,10)+n,"px")}))),o.classList.add("modal-opened")}}}]),e}();$(document).ready((function(){var e=function(){var e=$(".header");$(window).scrollTop()>100?e.addClass("header--fixed"):$(".main").hasClass("modal-opened")||e.removeClass("header--fixed")};e(),$(window).on("scroll",e);var t=document.querySelector(".main"),o=0,n=!1;function i(){n&&($(".header").removeClass("header--showed"),t.classList.remove("modal-opened"),t.style.paddingRight="",window.scrollTo(0,o),t.style.top="",n=!1)}$(".header__open-menu-btn").on("click",(function(){$(".header").addClass("header--showed"),o=window.pageYOffset;var e=window.innerWidth-t.clientWidth;t.style.top="".concat(-o,"px"),e&&(t.style.paddingRight="".concat(e,"px")),t.classList.add("modal-opened"),n=!0})),$(".header__close-menu-btn").on("click",i),$(window).on("resize",i),$(document).on("keyup",i),$(document).mouseup((function(e){var t=$(".header__nav");t.is(e.target)||0!==t.has(e.target).length||i()})),$(document).on("click",'a[href*="#"]',(function(e){var t=$(this).attr("href");if((t=t.substring(t.lastIndexOf("#"))).length>1&&$(t).length>0){e.preventDefault();var o=$(".header").height();i(),$("html, body").animate({scrollTop:$(t).offset().top-o},500)}})),$(".scroll-up__btn").on("click",(function(e){e.preventDefault(),i(),$("html, body").animate({scrollTop:$("body").offset().top},500)}));var s=function(){var e=$(".scroll-up");$(window).scrollTop()>600?e.addClass("show"):$(".main").hasClass("modal-opened")||e.removeClass("show")};s(),$(window).on("scroll",s),$(".projects__slider").slick({infinite:!0,speed:300,swipeToSlide:!0,slidesToShow:4,dots:!0,appendDots:$(".projects__slider-nav"),prevArrow:$(".projects__slider-nav").find(".projects__arrow--prev"),nextArrow:$(".projects__slider-nav").find(".projects__arrow--next"),responsive:[{breakpoint:1200,settings:{slidesToShow:3}},{breakpoint:768,settings:{slidesToShow:2}},{breakpoint:576,settings:{slidesToShow:1}}]}),$(".projects__slider-nav .slick-dots button").each((function(){var e=$(this).text();e.length<=1&&$(this).text("0"+e)}));new Modal;$("input[name='your-phone']").mask("+7 (999) 999-99-99")}));