"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}var Modal=function(){function e(t){_classCallCheck(this,e);this.config=Object.assign({backscroll:!0,linkAttrName:"data-modal",closeOnOverlay:!0,closeOnEsc:!0,closeBtnAttrName:"data-modal-close",catchFocus:!0,fixedSelectors:"*[data-fixed]",beforeOpen:function(){},afterClose:function(){}},t),this.config.linkAttrName&&this.init(),this._closeAfterTransition=this._closeAfterTransition.bind(this)}return _createClass(e,[{key:"init",value:function(){this.isOpened=!1,this.openedWindow=!1,this.starter=!1,this._nextWindows=!1,this._scrollPosition=0,this._reopenTrigger=!1,this._overlayChecker=!1,this._isMoved=!1,this._form=null,this._focusElements=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],this.eventsFeeler()}},{key:"eventsFeeler",value:function(){var e=this;document.addEventListener("click",(function(t){var i=t.target.closest("[".concat(e.config.linkAttrName,"]"));if(!e._isMoved&&i){t.preventDefault(),e.starter=i;var s=e.starter.getAttribute(e.config.linkAttrName);return e._nextWindows=document.querySelector("#"+s),void e.open()}t.target.closest("[".concat(e.config.closeBtnAttrName,"]"))&&e.close()})),this.config.closeOnOverlay&&(document.addEventListener("mousedown",(function(t){!e._isMoved&&t.target instanceof Element&&!t.target.classList.contains("modal__wrapper")||(e._overlayChecker=!0)})),document.addEventListener("mouseup",(function(t){if(!e._isMoved&&t.target instanceof Element&&e._overlayChecker&&t.target.classList.contains("modal__wrapper"))return t.preventDefault(),e._overlayChecker=!e._overlayChecker,void e.close();e._overlayChecker=!1}))),window.addEventListener("keydown",(function(t){if(!e._isMoved&&e.config.closeOnEsc&&27===t.which&&e.isOpened)return t.preventDefault(),void e.close();!e._isMoved&&e.config.catchFocus&&9===t.which&&e.isOpened&&e.focusCatcher(t)}))}},{key:"open",value:function(e){if(e&&(this._nextWindows="string"==typeof e?document.querySelector(e):e),this._nextWindows){if(this.isOpened)return this._reopenTrigger=!0,void this.close();this.openedWindow=this._nextWindows,this._form=this.openedWindow.querySelector("form"),this.config.beforeOpen(this),this._bodyScrollControl(),this.openedWindow.classList.add("modal--active"),this.openedWindow.setAttribute("aria-hidden","false"),this.config.catchFocus&&this.focusControl(),this.isOpened=!0}else console.log("Warning: Modal selector is not found")}},{key:"close",value:function(){var e=this;if(this.isOpened){if(this._form)this._form.querySelectorAll("input[data-form-data]").forEach((function(t){e._form.removeChild(t)}));this.openedWindow.classList.add("modal--moved"),this._isMoved=!0,this.openedWindow.addEventListener("transitionend",this._closeAfterTransition),this.openedWindow.classList.remove("modal--active")}}},{key:"_closeAfterTransition",value:function(){this.openedWindow.classList.remove("modal--moved"),this.openedWindow.removeEventListener("transitionend",this._closeAfterTransition),this._isMoved=!1,this.openedWindow.setAttribute("aria-hidden","true"),this.config.catchFocus&&this.focusControl(),this._bodyScrollControl(),this.isOpened=!1,this.openedWindow.scrollTop=0,this.config.afterClose(this),this._reopenTrigger&&(this._reopenTrigger=!1,this.open())}},{key:"focusControl",value:function(){var e=this.openedWindow.querySelectorAll(this._focusElements);this.isOpened&&this.starter?this.starter.focus():e.length&&e[0].focus()}},{key:"focusCatcher",value:function(e){var t=this.openedWindow.querySelectorAll(this._focusElements),i=Array.prototype.slice.call(t);if(this.openedWindow.contains(document.activeElement)){var s=i.indexOf(document.activeElement);e.shiftKey&&0===s&&(i[i.length-1].focus(),e.preventDefault()),e.shiftKey||s!==i.length-1||(i[0].focus(),e.preventDefault())}else i[0].focus(),e.preventDefault()}},{key:"_bodyScrollControl",value:function(){if(this.config.backscroll){var e=document.querySelectorAll(this.config.fixedSelectors),t=Array.prototype.slice.call(e),i=document.querySelector(".main");if(!0===this.isOpened)return i.classList.remove("modal-opened"),i.style.paddingRight="",t.forEach((function(e){e.style.paddingRight=""})),window.scrollTo(0,this._scrollPosition),void(i.style.top="");this._scrollPosition=window.pageYOffset;var s=window.innerWidth-i.clientWidth;i.style.top="".concat(-this._scrollPosition,"px"),s&&(i.style.paddingRight="".concat(s,"px"),t.forEach((function(e){e.style.paddingRight="".concat(parseInt(getComputedStyle(e).paddingRight,10)+s,"px")}))),i.classList.add("modal-opened")}}}]),e}(),Accordion=function(){function e(t,i){_classCallCheck(this,e),this._el="string"==typeof t?document.querySelector(t):t;this._config=Object.assign({alwaysOpen:!0,duration:350,itemClass:"accordion__item",headerClass:"accordion__header",bodyClass:"accordion__body"},i),this.addEventListener()}return _createClass(e,[{key:"addEventListener",value:function(){var e=this;null!=this._el&&this._el.addEventListener("click",(function(t){var i=t.target.closest("."+e._config.headerClass);if(i){if(!e._config.alwaysOpen){var s=e._el.querySelector(".show");s&&s!==i.parentElement&&e.toggle(s)}e.toggle(i.parentElement)}}))}},{key:"show",value:function(e){var t=e.querySelector("."+this._config.bodyClass);if(!t.classList.contains("collapsing")&&!e.classList.contains("show")){t.style.display="block";var i=t.offsetHeight;t.style.height=0,t.style.overflow="hidden",t.style.transition="height ".concat(this._config.duration,"ms ease"),t.classList.add("collapsing"),e.classList.add("slidedown"),t.offsetHeight,t.style.height="".concat(i,"px"),window.setTimeout((function(){t.classList.remove("collapsing"),e.classList.remove("slidedown"),t.classList.add("collapse"),e.classList.add("show"),t.style.display="",t.style.height="",t.style.transition="",t.style.overflow=""}),this._config.duration)}}},{key:"hide",value:function(e){var t=e.querySelector("."+this._config.bodyClass);!t.classList.contains("collapsing")&&e.classList.contains("show")&&(t.style.height="".concat(t.offsetHeight,"px"),t.offsetHeight,t.style.display="block",t.style.height=0,t.style.overflow="hidden",t.style.transition="height ".concat(this._config.duration,"ms ease"),t.classList.remove("collapse"),e.classList.remove("show"),t.classList.add("collapsing"),window.setTimeout((function(){t.classList.remove("collapsing"),t.classList.add("collapse"),t.style.display="",t.style.height="",t.style.transition="",t.style.overflow=""}),this._config.duration))}},{key:"toggle",value:function(e){e.classList.contains("show")?this.hide(e):this.show(e)}}]),e}();document.addEventListener("DOMContentLoaded",(function(e){new Modal;var t=document.querySelector(".header"),i=t.querySelector(".header__open-menu"),s=!1,o=document.documentElement,n=0;i.addEventListener("click",(function(e){if(s=!s,t.classList.toggle("header--menu-opened"),s){n=window.pageYOffset;var i=window.innerWidth-o.clientWidth;o.style.top="".concat(-n,"px"),i&&(o.style.marginRight="".concat(i,"px"),t.style.paddingRight="".concat(parseInt(getComputedStyle(t).paddingRight,10)+i,"px")),o.classList.add("modal-opened")}else o.classList.remove("modal-opened"),o.style.marginRight="",t.style.paddingRight="",window.scrollTo(0,n),o.style.top=""})),document.querySelectorAll(".search").forEach((function(e){e.querySelector(".search__open-btn").addEventListener("click",(function(){e.classList.toggle("active")}))})),document.querySelectorAll(".range-slider").forEach((function(e){var t=e.querySelector(".range-slider__range"),i=Number(e.dataset.min),s=Number(e.dataset.max);noUiSlider.create(t,{start:[i,s],connect:!0,step:1,range:{min:i,max:s},format:{from:function(e){return parseInt(e)},to:function(e){return parseInt(e)}}});var o=[e.querySelector('input[name="min"]'),e.querySelector('input[name="max"]')];t.noUiSlider.on("update",(function(e,t){o[t].value=e[t].toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}))})),document.querySelectorAll(".tabs").forEach((function(e){e.querySelectorAll(".tabs__buttons .button").forEach((function(t){t.addEventListener("click",(function(i){t.classList.contains("active")||(e.querySelectorAll(".active").forEach((function(e){e.classList.remove("active")})),t.classList.add("active"),document.querySelector('.tabs__content[data-tab-id="'.concat(t.dataset.tabTarget,'"]')).classList.add("active"))}))}))})),new Accordion(".faq__list",{alwaysOpen:!1,duration:350,itemClass:"faq__item",headerClass:"faq__head",bodyClass:"faq__body"});var r=document.querySelector(".projects__slider.slider");null!==r&&new Swiper(r.querySelector(".slider__wrap"),{spaceBetween:14,wrapperClass:"slider__list",slideClass:"slider__slide",slidesPerView:1,navigation:{nextEl:r.querySelector(".slider__arrow--next"),prevEl:r.querySelector(".slider__arrow--prev"),disabledClass:"disabled"},pagination:{el:r.querySelector(".slider__pagination"),bulletClass:"slider__bullet",bulletActiveClass:"active",clickable:!0},breakpoints:{768:{spaceBetween:20,slidesPerView:2},992:{slidesPerView:3},1200:{spaceBetween:30,slidesPerView:5}}});var a=document.querySelector(".proj-card-full__main-slider.slider"),l=document.querySelector(".proj-card-full__thumb-slider.slider");if(null!==a&&null!==l){var c=new Swiper(l.querySelector(".slider__wrap"),{spaceBetween:30,wrapperClass:"slider__list",slideClass:"slider__slide",slidesPerView:3,freeMode:!0,watchSlidesProgress:!0,navigation:{nextEl:l.querySelector(".slider__arrow--next"),prevEl:l.querySelector(".slider__arrow--prev"),disabledClass:"disabled"}});new Swiper(a.querySelector(".slider__wrap"),{spaceBetween:10,wrapperClass:"slider__list",slideClass:"slider__slide",slidesPerView:1,thumbs:{swiper:c}})}}));