"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var Modal=function(){function e(t){_classCallCheck(this,e);this.config=Object.assign({backscroll:!0,linkAttrName:"data-modal",closeOnOverlay:!0,closeOnEsc:!0,closeBtnAttrName:"data-modal-close",catchFocus:!1,fixedSelectors:"*[data-fixed]",beforeOpen:function(){},afterClose:function(){}},t),this.config.linkAttrName&&this.init(),this._closeAfterTransition=this._closeAfterTransition.bind(this)}return _createClass(e,[{key:"init",value:function(){this.isOpened=!1,this.openedWindow=!1,this.starter=!1,this._nextWindows=!1,this._scrollPosition=0,this._reopenTrigger=!1,this._overlayChecker=!1,this._isMoved=!1,this._form=null,this._focusElements=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],this.eventsFeeler()}},{key:"eventsFeeler",value:function(){var e=this;document.addEventListener("click",(function(t){var n=t.target.closest("[".concat(e.config.linkAttrName,"]"));if(!e._isMoved&&n){t.preventDefault(),e.starter=n;var i=e.starter.getAttribute(e.config.linkAttrName);return e._nextWindows=document.querySelector("#"+i),void e.open()}t.target.closest("[".concat(e.config.closeBtnAttrName,"]"))&&e.close()})),this.config.closeOnOverlay&&(document.addEventListener("mousedown",(function(t){!e._isMoved&&t.target instanceof Element&&!t.target.classList.contains("modal__wrapper")||(e._overlayChecker=!0)})),document.addEventListener("mouseup",(function(t){if(!e._isMoved&&t.target instanceof Element&&e._overlayChecker&&t.target.classList.contains("modal__wrapper"))return t.preventDefault(),e._overlayChecker=!e._overlayChecker,void e.close();e._overlayChecker=!1}))),window.addEventListener("keydown",(function(t){if(!e._isMoved&&e.config.closeOnEsc&&27===t.which&&e.isOpened)return t.preventDefault(),void e.close();!e._isMoved&&e.config.catchFocus&&9===t.which&&e.isOpened&&e.focusCatcher(t)}))}},{key:"open",value:function(e){if(e&&(this._nextWindows="string"==typeof e?document.querySelector(e):e),this._nextWindows){if(this.isOpened)return this._reopenTrigger=!0,void this.close();this.openedWindow=this._nextWindows,this._form=this.openedWindow.querySelector("form"),this.config.beforeOpen(this),this._bodyScrollControl(),this.openedWindow.classList.add("modal--active"),this.openedWindow.setAttribute("aria-hidden","false"),this.config.catchFocus&&this.focusControl(),this.isOpened=!0}else console.log("Warning: Modal selector is not found")}},{key:"close",value:function(){var e=this;if(this.isOpened){if(this._form)this._form.querySelectorAll("input[data-form-data]").forEach((function(t){e._form.removeChild(t)}));this.openedWindow.classList.add("modal--moved"),this._isMoved=!0,this.openedWindow.addEventListener("transitionend",this._closeAfterTransition),this.openedWindow.classList.remove("modal--active")}}},{key:"_closeAfterTransition",value:function(){this.openedWindow.classList.remove("modal--moved"),this.openedWindow.removeEventListener("transitionend",this._closeAfterTransition),this._isMoved=!1,this.openedWindow.setAttribute("aria-hidden","true"),this.config.catchFocus&&this.focusControl(),this._bodyScrollControl(),this.isOpened=!1,this.openedWindow.scrollTop=0,this.config.afterClose(this),this._reopenTrigger&&(this._reopenTrigger=!1,this.open())}},{key:"focusControl",value:function(){var e=this.openedWindow.querySelectorAll(this._focusElements);this.isOpened&&this.starter?this.starter.focus():e.length&&e[0].focus()}},{key:"focusCatcher",value:function(e){var t=this.openedWindow.querySelectorAll(this._focusElements),n=Array.prototype.slice.call(t);if(this.openedWindow.contains(document.activeElement)){var i=n.indexOf(document.activeElement);e.shiftKey&&0===i&&(n[n.length-1].focus(),e.preventDefault()),e.shiftKey||i!==n.length-1||(n[0].focus(),e.preventDefault())}else n[0].focus(),e.preventDefault()}},{key:"_bodyScrollControl",value:function(){if(this.config.backscroll){var e=document.querySelectorAll(this.config.fixedSelectors),t=Array.prototype.slice.call(e),n=document.querySelector(".main");if(!0===this.isOpened)return n.classList.remove("modal-opened"),n.style.paddingRight="",t.forEach((function(e){e.style.paddingRight=""})),window.scrollTo(0,this._scrollPosition),void(n.style.top="");this._scrollPosition=window.pageYOffset;var i=window.innerWidth-n.clientWidth;n.style.top="".concat(-this._scrollPosition,"px"),i&&(n.style.paddingRight="".concat(i,"px"),t.forEach((function(e){e.style.paddingRight="".concat(parseInt(getComputedStyle(e).paddingRight,10)+i,"px")}))),n.classList.add("modal-opened")}}}]),e}();document.addEventListener("DOMContentLoaded",(function(e){new Modal;var t=document.documentElement,n=document.querySelector(".header"),i=n.querySelector(".header__open-btn"),o=n.querySelector(".header__close-btn"),r=n.querySelector(".header__overlay"),a=0,s=!1,l=window.matchMedia("(min-width: 992px)");function c(){t.classList.remove("modal-opened"),t.style.marginRight="",n.style.paddingRight="",window.scrollTo(0,a),t.style.top="",n.classList.remove("header--showed"),s=!1}function d(e){e.matches&&s&&c()}i.addEventListener("click",(function(){!function(){a=window.pageYOffset;var e=window.innerWidth-t.clientWidth;t.style.top="".concat(-a,"px"),e&&(t.style.marginRight="".concat(e,"px"),n.style.paddingRight="".concat(parseInt(getComputedStyle(n).paddingRight,10)+e,"px"));t.classList.add("modal-opened"),n.classList.add("header--showed"),s=!0}()})),o.addEventListener("click",(function(){c()})),r.addEventListener("click",(function(){c()})),l.addEventListener("change",d),d(l),document.querySelectorAll(".anchor").forEach((function(e){e.addEventListener("click",(function(t){t.preventDefault();var i,o=e.hash;(i=o?document.querySelector(o):document.body)&&(s&&c(),window.scrollTo({behavior:"smooth",top:i.getBoundingClientRect().top+pageYOffset-n.offsetHeight}))}))}));var u=document.querySelector(".calc"),f=u.querySelectorAll('input[name="calc-day"]'),h=u.querySelector(".calc__percent-value"),p=document.querySelector('.calc__rate-value input[name="rate"]'),v=u.querySelector(".calc__result-value--coin"),m=u.querySelector(".calc__result-value--zloty"),y=0,_=0;function w(){y=this.dataset.percent,_=Math.floor(30/this.value)>1?1/Math.floor(30/this.value):this.value/30,h.textContent=y+"%",g()}function g(){var e=Math.floor(parseInt(p.value.replace(/\s+/g,""),10)/100*y*_);v.textContent=e+" monet",m.textContent=(20.81*e).toFixed(2)+" zł"}f.forEach((function(e){e.checked&&w.call(e),e.addEventListener("change",w)}));var S=document.querySelector(".range-slider"),b=Number(S.dataset.min),E=Number(S.dataset.max),q=Number(S.dataset.startValue),L=document.querySelector("#"+S.dataset.input),C=S.querySelector(".range-slider__range"),x=S.querySelectorAll(".range-slider__change-btn");noUiSlider.create(C,{start:q,connect:"lower",step:1,range:{min:b,max:E},format:{from:function(e){return parseInt(e)},to:function(e){return parseInt(e)}}}),C.noUiSlider.on("update",(function(e,t){L.value=e[t].toString().replace(/\B(?=(\d{3})+(?!\d))/g," "),g()})),L.addEventListener("change",(function(){C.noUiSlider.set(this.value)})),x.forEach((function(e){var t=!1,n=!1;e.classList.contains("range-slider__change-btn--plus")&&(n=!0);for(var i=0,o=["mousedown","touchstart"];i<o.length;i++){var r=o[i];e.addEventListener(r,(function(){t=!0}))}for(var a=0,s=["mouseup","touchend"];a<s.length;a++){var l=s[a];e.addEventListener(l,(function(){t=!1}))}setInterval((function(){if(t){var e=C.noUiSlider.get();n?C.noUiSlider.set((++e).toString()):C.noUiSlider.set((--e).toString())}}),100)}));var k=document.querySelector(".diagram"),A=k.querySelector(".diagram__title"),M=k.querySelector(".diagram__subtitle");function O(e){A.textContent=e.dataset.type,M.textContent=e.dataset.value}k.querySelectorAll(".diagram__piece").forEach((function(e){e.addEventListener("click",(function(){!function(e){var t=k.querySelector(".diagram__piece--active"),n=t.getAttribute("d"),i=t.dataset.path;t.setAttribute("d",i),t.dataset.path=n,t.classList.remove("diagram__piece--active");var o=e.getAttribute("d"),r=e.dataset.path;e.setAttribute("d",r),e.dataset.path=o,e.classList.add("diagram__piece--active")}(this)})),e.addEventListener("mouseenter",(function(){O(this)})),e.addEventListener("toutchstart",(function(){O(this)}))})),document.querySelectorAll(".timer").forEach((function(e){var t=e.dataset.nearDays,n=e.dataset.nextDays,i=e.querySelector(".timer__near-date"),o=e.querySelector(".timer__next-date"),r=new Date;r.setHours(0),r.setMinutes(0),r.setSeconds(0);var a=new Date(r.getTime()),s=new Date(r.getTime());a.setDate(a.getDate()+parseInt(t)),s.setDate(s.getDate()+parseInt(n)),i.textContent=a.toLocaleDateString(),o.textContent=s.toLocaleDateString();var l=null;function c(e,t){return t[e%100>4&&e%100<20?2:[2,0,1,1,1,2][e%10<5?e%10:5]]}function d(){var e=a-new Date;e<=0&&clearInterval(l);var t=e>0?Math.floor(e/1e3/60/60/24):0,n=e>0?Math.floor(e/1e3/60/60)%24:0,i=e>0?Math.floor(e/1e3/60)%60:0,o=e>0?Math.floor(e/1e3)%60:0;u.textContent=t<10?"0"+t:t,f.textContent=n<10?"0"+n:n,h.textContent=i<10?"0"+i:i,p.textContent=o<10?"0"+o:o,u.dataset.title=c(t,["день","дня","дней"]),f.dataset.title=c(n,["час","часа","часов"]),h.dataset.title=c(i,["минута","минуты","минут"]),p.dataset.title=c(o,["секунда","секунды","секунд"])}var u=e.querySelector(".timer__day"),f=e.querySelector(".timer__hour"),h=e.querySelector(".timer__minute"),p=e.querySelector(".timer__second");d(),l=setInterval(d,1e3)}));var W=document.querySelector(".roadmap__wrap");new Swiper(W,{spaceBetween:20,freeMode:!0,slidesPerView:1,navigation:{nextEl:W.querySelector(".slider__arrow--next"),prevEl:W.querySelector(".slider__arrow--prev"),disabledClass:"disabled"},breakpoints:{576:{freeMode:!0,slidesPerView:"auto"},1200:{freeMode:!0,slidesPerView:4}}});var P=window.matchMedia("(max-width: 576px)");function T(e){e.matches?W.swiper.slideTo(1,!1,!1):W.swiper.slideTo(0,!1,!1)}P.addEventListener("change",T),T(P);var D=document.querySelector(".team__wrap");new Swiper(D,{freeMode:!0,spaceBetween:20,slidesPerView:1,navigation:{nextEl:D.querySelector(".slider__arrow--next"),prevEl:D.querySelector(".slider__arrow--prev"),disabledClass:"disabled"},breakpoints:{576:{slidesPerView:2},992:{slidesPerView:3},1200:{slidesPerView:4}}}),window.addEventListener("resize",(function(){W.swiper.update(),D.swiper.update()}));var V=new Swiper(".partners__wrap",{loop:!0,allowTouchMove:!1,speed:1e4,slidesPerView:2,breakpoints:{576:{slidesPerView:3},768:{slidesPerView:4},992:{slidesPerView:5},1200:{freeMode:!1,slidesPerView:6}}});function I(e,t){var n=e.parentElement.querySelector(".form__message");null==n&&((n=document.createElement("div")).classList.add("form__message"),e.parentElement.appendChild(n)),e.classList.add("form__input--fault"),n.textContent=t,n.style.opacity=0,window.requestAnimationFrame((function(){window.requestAnimationFrame((function(){n.style.opacity=1}))}))}!function e(){V.slideTo(V.slides.length),V.once("transitionEnd",(function(){V.slideTo(V.params.slidesPerView,0,!1),setTimeout((function(){e()}),0)}))}(),document.querySelectorAll("input[type=tel]").forEach((function(e){var t=new IMask(e,{mask:"+{48} 000-000-000",lazy:!0,placeholderChar:"_"});e.addEventListener("focus",(function(){t.updateOptions({lazy:!1})}),!0),e.addEventListener("blur",(function(){t.updateOptions({lazy:!0}),t.masked.rawInputValue||(t.value="")}),!0)})),document.querySelectorAll(".form").forEach((function(e){var t=e.querySelectorAll("input");t.forEach((function(e){e.addEventListener("blur",(function(){var t=!1;if(e.value<=1)I(e,"Uzupełnij pole");else{switch(e.getAttribute("name")){case"your-phone":e.value.length<15&&(t=!0,I(e,"Pole wypełnione niepoprawnie"));break;case"your-mail":/^[\w\d%$:.-]+@\w+\.\w{2,5}$/.test(e.value)||(t=!0,I(e,"Niepoprawny format adresu email"));break;case"your-name":case"your-surname":e.value.replace(/[a-zA-ZżźćńółęąśŻŹĆĄŚĘŁÓŃ]+/g,"").length>0&&(t=!0,I(e,"Wartość pola jest nieprawidłowa"))}t||function(e){var t=e.parentElement.querySelector(".form__message");e.classList.remove("form__input--fault"),t&&(t.style.opacity=0,t.addEventListener("transitionend",(function(){e.parentElement.removeChild(t)}),{once:!0}))}(e)}}))})),e.addEventListener("submit",(function(e){e.preventDefault();var n=!1;t.forEach((function(e){if(e.value<=1)return I(e,"Uzupełnij pole"),void(n=!0);switch(e.getAttribute("name")){case"your-phone":e.value.length<15&&(n=!0,I(e,"Pole wypełnione niepoprawnie"));break;case"your-mail":/^[\w\d%$:.-]+@\w+\.\w{2,5}$/.test(e.value)||(n=!0,I(e,"Niepoprawny format adresu email"));break;case"your-name":case"your-surname":e.value.replace(/[a-zA-ZżźćńółęąśŻŹĆĄŚĘŁÓŃ]+/g,"").length>0&&(n=!0,I(e,"Wartość pola jest nieprawidłowa"))}})),n||(location.href=this.getAttribute("action"))}))}))}));